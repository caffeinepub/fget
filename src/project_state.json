{
  "schemaVersion": "1.0.0",
  "projectStateVersion": 3,
  "summary": "Restore the previously working file explorer and click-to-open file preview (as in v0.3.86), ensuring current search remains working; target release v0.3.88.",
  "architectural_notes": [
    "Do not regress currently working search while restoring file explorer/preview.",
    "Preview behavior should match older versions (up to v0.3.86): large preview, fullscreen, close button, and in-folder next/prev navigation.",
    "For unsupported/unsafe file types, offer direct download instead of attempting preview.",
    "Text-based previews must support both horizontal and vertical scrolling (native scrollbars if possible; otherwise custom scroll container)."
  ],
  "known_issues": [
    "Build/deploy attempts are currently blocked by repeated platform-level \"Internal AI error encountered\" during build phase (not caused by app code)."
  ],
  "isFixRequest": true,
  "existing_features": [
    {
      "id": "feature-restore-the-file-click-behavior-in-the-file-browser-so-that-clicking-a-file-row-reliably-opens-the-existing-filepreviewmodal-for-that-file-as-it-worked-in-v0-3-86-without-changing-or-breaking-the-currently-working-search-behavior",
      "title": "Restore the file click behavior in the file browser so that clicking a file row reliably opens the existing FilePreviewModal for that file (as it worked in v0.3.86), without changing or breaking the currently working search behavior.",
      "reqIds": [
        "REQ-1"
      ],
      "version": 1
    },
    {
      "id": "feature-update-preview-navigation-to-match-the-prior-gallery-style-behavior-when-a-preview-is-open-users-can-move-to-previous-next-files-within-the-current-context-current-folder-or-current-search-results-list-when-search-is-active-using-ui-controls-and-keyboard-arrows",
      "title": "Update preview navigation to match the prior “gallery-style” behavior: when a preview is open, users can move to previous/next files within the current context (current folder, or current search results list when search is active) using UI controls and keyboard arrows.",
      "reqIds": [
        "REQ-2"
      ],
      "version": 1
    },
    {
      "id": "feature-ensure-the-preview-modal-can-handle-all-file-types-provide-in-browser-viewers-for-images-videos-audio-pdfs-documents-and-text-for-any-unsupported-unsafe-file-type-show-a-clear-preview-not-available-state-with-a-direct-download-action-no-infinite-loading",
      "title": "Ensure the preview modal can handle all file types: provide in-browser viewers for images, videos, audio, PDFs/documents, and text; for any unsupported/unsafe file type, show a clear “Preview not available” state with a direct download action (no infinite loading).",
      "reqIds": [
        "REQ-3"
      ],
      "version": 1
    },
    {
      "id": "feature-for-text-based-file-previews-ensure-users-can-scroll-both-vertically-and-horizontally-to-view-the-entire-content-using-browser-native-scrolling-where-possible",
      "title": "For text-based file previews, ensure users can scroll both vertically and horizontally to view the entire content, using browser-native scrolling where possible.",
      "reqIds": [
        "REQ-4"
      ],
      "version": 1
    },
    {
      "id": "feature-bump-the-app-version-to-0-3-88-everywhere-it-is-surfaced-in-code-config-at-minimum-frontend-src-lib-appversion-ts-and-backend-main-mo-appversion",
      "title": "Bump the app version to 0.3.88 everywhere it is surfaced in code/config (at minimum: frontend/src/lib/appVersion.ts and backend/main.mo appVersion).",
      "reqIds": [
        "REQ-5"
      ],
      "version": 1
    }
  ],
  "new_feature_requests": [
    {
      "id": "AR-1",
      "summary": "Restore file explorer + click-to-open preview: large preview w/ fullscreen and close, next/prev navigation within folder (gallery-style), viewers for images/videos/PDF, scrollable text preview (horizontal+vertical), and safe download fallback for unsupported/unsafe types; must not break existing search; match older UI behavior (pre-v0.3.87), for v0.3.88.",
      "reqIds": [],
      "status": "pending"
    }
  ],
  "projectName": "v0.3.88: Restore click-to-open file preview with robust viewers and download fallback (without breaking search)",
  "clarification_mode": "instant",
  "clarification_rounds": 0
}